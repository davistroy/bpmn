<?xml version="1.0" encoding="UTF-8"?>
<definitions
    xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
    xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    id="Definitions_Sample"
    targetNamespace="http://bpmn.io/schema/bpmn"
    exporter="bpmn-diagram-skill"
    exporterVersion="1.0.0">

  <!-- Sample Order Processing Workflow -->
  <process id="Process_OrderProcessing" name="Order Processing" isExecutable="false">

    <!-- Start Event -->
    <startEvent id="Start_OrderReceived" name="Order Received">
      <outgoing>Flow_ToValidation</outgoing>
    </startEvent>

    <!-- Validate Order Task -->
    <userTask id="Task_ValidateOrder" name="Validate Order">
      <incoming>Flow_ToValidation</incoming>
      <outgoing>Flow_ToDecision</outgoing>
    </userTask>

    <!-- Decision Gateway -->
    <exclusiveGateway id="Gateway_OrderValid" name="Order Valid?">
      <incoming>Flow_ToDecision</incoming>
      <outgoing>Flow_ValidOrder</outgoing>
      <outgoing>Flow_InvalidOrder</outgoing>
    </exclusiveGateway>

    <!-- Process Valid Order -->
    <serviceTask id="Task_ProcessPayment" name="Process Payment">
      <incoming>Flow_ValidOrder</incoming>
      <outgoing>Flow_ToShipping</outgoing>
    </serviceTask>

    <!-- Ship Order -->
    <userTask id="Task_ShipOrder" name="Ship Order">
      <incoming>Flow_ToShipping</incoming>
      <outgoing>Flow_ToComplete</outgoing>
    </userTask>

    <!-- Reject Invalid Order -->
    <userTask id="Task_RejectOrder" name="Reject Order">
      <incoming>Flow_InvalidOrder</incoming>
      <outgoing>Flow_ToCancel</outgoing>
    </userTask>

    <!-- End Events -->
    <endEvent id="End_OrderCompleted" name="Order Completed">
      <incoming>Flow_ToComplete</incoming>
    </endEvent>

    <endEvent id="End_OrderCancelled" name="Order Cancelled">
      <incoming>Flow_ToCancel</incoming>
    </endEvent>

    <!-- Sequence Flows -->
    <sequenceFlow id="Flow_ToValidation" sourceRef="Start_OrderReceived" targetRef="Task_ValidateOrder"/>
    <sequenceFlow id="Flow_ToDecision" sourceRef="Task_ValidateOrder" targetRef="Gateway_OrderValid"/>
    <sequenceFlow id="Flow_ValidOrder" name="Yes" sourceRef="Gateway_OrderValid" targetRef="Task_ProcessPayment">
      <conditionExpression xsi:type="tFormalExpression">${orderValid == true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow_InvalidOrder" name="No" sourceRef="Gateway_OrderValid" targetRef="Task_RejectOrder">
      <conditionExpression xsi:type="tFormalExpression">${orderValid == false}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow_ToShipping" sourceRef="Task_ProcessPayment" targetRef="Task_ShipOrder"/>
    <sequenceFlow id="Flow_ToComplete" sourceRef="Task_ShipOrder" targetRef="End_OrderCompleted"/>
    <sequenceFlow id="Flow_ToCancel" sourceRef="Task_RejectOrder" targetRef="End_OrderCancelled"/>

  </process>

  <!-- Diagram Interchange - Visual Layout -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_OrderProcessing">

      <!-- Start Event Shape -->
      <bpmndi:BPMNShape id="Start_OrderReceived_di" bpmnElement="Start_OrderReceived">
        <dc:Bounds x="152" y="192" width="36" height="36"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds x="132" y="235" width="76" height="14"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Validate Order Task Shape -->
      <bpmndi:BPMNShape id="Task_ValidateOrder_di" bpmnElement="Task_ValidateOrder">
        <dc:Bounds x="240" y="170" width="100" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Gateway Shape -->
      <bpmndi:BPMNShape id="Gateway_OrderValid_di" bpmnElement="Gateway_OrderValid" isMarkerVisible="true">
        <dc:Bounds x="395" y="185" width="50" height="50"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds x="388" y="161" width="64" height="14"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Process Payment Task Shape -->
      <bpmndi:BPMNShape id="Task_ProcessPayment_di" bpmnElement="Task_ProcessPayment">
        <dc:Bounds x="500" y="100" width="100" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Ship Order Task Shape -->
      <bpmndi:BPMNShape id="Task_ShipOrder_di" bpmnElement="Task_ShipOrder">
        <dc:Bounds x="660" y="100" width="100" height="80"/>
      </bpmndi:BPMNShape>

      <!-- Reject Order Task Shape -->
      <bpmndi:BPMNShape id="Task_RejectOrder_di" bpmnElement="Task_RejectOrder">
        <dc:Bounds x="500" y="250" width="100" height="80"/>
      </bpmndi:BPMNShape>

      <!-- End Event - Completed Shape -->
      <bpmndi:BPMNShape id="End_OrderCompleted_di" bpmnElement="End_OrderCompleted">
        <dc:Bounds x="822" y="122" width="36" height="36"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds x="800" y="165" width="81" height="14"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- End Event - Cancelled Shape -->
      <bpmndi:BPMNShape id="End_OrderCancelled_di" bpmnElement="End_OrderCancelled">
        <dc:Bounds x="662" y="272" width="36" height="36"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds x="640" y="315" width="81" height="14"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>

      <!-- Sequence Flow Edges -->
      <bpmndi:BPMNEdge id="Flow_ToValidation_di" bpmnElement="Flow_ToValidation">
        <di:waypoint x="188" y="210"/>
        <di:waypoint x="240" y="210"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_ToDecision_di" bpmnElement="Flow_ToDecision">
        <di:waypoint x="340" y="210"/>
        <di:waypoint x="395" y="210"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_ValidOrder_di" bpmnElement="Flow_ValidOrder">
        <di:waypoint x="420" y="185"/>
        <di:waypoint x="420" y="140"/>
        <di:waypoint x="500" y="140"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds x="428" y="160" width="18" height="14"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_InvalidOrder_di" bpmnElement="Flow_InvalidOrder">
        <di:waypoint x="420" y="235"/>
        <di:waypoint x="420" y="290"/>
        <di:waypoint x="500" y="290"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds x="428" y="260" width="15" height="14"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_ToShipping_di" bpmnElement="Flow_ToShipping">
        <di:waypoint x="600" y="140"/>
        <di:waypoint x="660" y="140"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_ToComplete_di" bpmnElement="Flow_ToComplete">
        <di:waypoint x="760" y="140"/>
        <di:waypoint x="822" y="140"/>
      </bpmndi:BPMNEdge>

      <bpmndi:BPMNEdge id="Flow_ToCancel_di" bpmnElement="Flow_ToCancel">
        <di:waypoint x="600" y="290"/>
        <di:waypoint x="662" y="290"/>
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</definitions>
